{"ast":null,"code":"var _jsxFileName = \"/Users/isaac/Halloween/src/components/AudioManager.tsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState, useCallback } from 'react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AudioManager = ({\n  isLetterOpened\n}) => {\n  _s();\n  const voicyAudioRef = useRef(null);\n  const musicAudioRef = useRef(null);\n  const [voicyFiles] = useState(['Voicy_Troll! in the dungeon! troll in the dungeon!.mp3']);\n  const [hasPlayedVoicy, setHasPlayedVoicy] = useState(false);\n  useEffect(() => {\n    if (isLetterOpened && !hasPlayedVoicy) {\n      playRandomVoicyClip();\n      setHasPlayedVoicy(true);\n    }\n  }, [isLetterOpened, hasPlayedVoicy, playRandomVoicyClip]);\n  const playRandomVoicyClip = useCallback(() => {\n    if (voicyAudioRef.current) {\n      // Get a random Voicy file\n      const randomFile = voicyFiles[Math.floor(Math.random() * voicyFiles.length)];\n      voicyAudioRef.current.src = `/audio/voicy/${randomFile}`;\n      voicyAudioRef.current.volume = 0.7;\n\n      // Handle audio loading errors gracefully\n      voicyAudioRef.current.onerror = () => {\n        console.warn(`Could not load audio file: ${randomFile}`);\n        // If Voicy clip fails, go straight to background music\n        setTimeout(() => {\n          playHedwigsTheme();\n        }, 1000);\n      };\n      voicyAudioRef.current.play().catch(error => {\n        console.warn('Audio playback failed:', error);\n        // If playback fails, go straight to background music\n        setTimeout(() => {\n          playHedwigsTheme();\n        }, 1000);\n      });\n    }\n  }, [voicyFiles]);\n  const playHedwigsTheme = () => {\n    if (musicAudioRef.current) {\n      musicAudioRef.current.src = '/audio/music/Hedwigs Theme.mp3';\n      musicAudioRef.current.volume = 0.3; // Soft background music\n      musicAudioRef.current.loop = true;\n\n      // Handle audio loading errors gracefully\n      musicAudioRef.current.onerror = () => {\n        console.warn('Could not load Hedwig\\'s Theme');\n      };\n      musicAudioRef.current.play().catch(error => {\n        console.warn('Background music playback failed:', error);\n      });\n    }\n  };\n  const handleVoicyEnded = () => {\n    // After Voicy clip ends, start Hedwig's Theme\n    setTimeout(() => {\n      playHedwigsTheme();\n    }, 500); // Small delay for smooth transition\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n      ref: voicyAudioRef,\n      onEnded: handleVoicyEnded,\n      preload: \"metadata\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n      ref: musicAudioRef,\n      preload: \"metadata\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(AudioManager, \"VvPkZE8Uns4fEYjP9KgLmfXZCKU=\");\n_c = AudioManager;\nexport default AudioManager;\nvar _c;\n$RefreshReg$(_c, \"AudioManager\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","jsxDEV","_jsxDEV","Fragment","_Fragment","AudioManager","isLetterOpened","_s","voicyAudioRef","musicAudioRef","voicyFiles","hasPlayedVoicy","setHasPlayedVoicy","playRandomVoicyClip","current","randomFile","Math","floor","random","length","src","volume","onerror","console","warn","setTimeout","playHedwigsTheme","play","catch","error","loop","handleVoicyEnded","children","ref","onEnded","preload","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/isaac/Halloween/src/components/AudioManager.tsx"],"sourcesContent":["import React, { useRef, useEffect, useState, useCallback } from 'react';\n\ninterface AudioManagerProps {\n  isLetterOpened: boolean;\n}\n\nconst AudioManager: React.FC<AudioManagerProps> = ({ isLetterOpened }) => {\n  const voicyAudioRef = useRef<HTMLAudioElement>(null);\n  const musicAudioRef = useRef<HTMLAudioElement>(null);\n  const [voicyFiles] = useState([\n    'Voicy_Troll! in the dungeon! troll in the dungeon!.mp3'\n  ]);\n  const [hasPlayedVoicy, setHasPlayedVoicy] = useState(false);\n\n  useEffect(() => {\n    if (isLetterOpened && !hasPlayedVoicy) {\n      playRandomVoicyClip();\n      setHasPlayedVoicy(true);\n    }\n  }, [isLetterOpened, hasPlayedVoicy, playRandomVoicyClip]);\n\n  const playRandomVoicyClip = useCallback(() => {\n    if (voicyAudioRef.current) {\n      // Get a random Voicy file\n      const randomFile = voicyFiles[Math.floor(Math.random() * voicyFiles.length)];\n      voicyAudioRef.current.src = `/audio/voicy/${randomFile}`;\n      voicyAudioRef.current.volume = 0.7;\n      \n      // Handle audio loading errors gracefully\n      voicyAudioRef.current.onerror = () => {\n        console.warn(`Could not load audio file: ${randomFile}`);\n        // If Voicy clip fails, go straight to background music\n        setTimeout(() => {\n          playHedwigsTheme();\n        }, 1000);\n      };\n      \n      voicyAudioRef.current.play().catch((error) => {\n        console.warn('Audio playback failed:', error);\n        // If playback fails, go straight to background music\n        setTimeout(() => {\n          playHedwigsTheme();\n        }, 1000);\n      });\n    }\n  }, [voicyFiles]);\n\n  const playHedwigsTheme = () => {\n    if (musicAudioRef.current) {\n      musicAudioRef.current.src = '/audio/music/Hedwigs Theme.mp3';\n      musicAudioRef.current.volume = 0.3; // Soft background music\n      musicAudioRef.current.loop = true;\n      \n      // Handle audio loading errors gracefully\n      musicAudioRef.current.onerror = () => {\n        console.warn('Could not load Hedwig\\'s Theme');\n      };\n      \n      musicAudioRef.current.play().catch((error) => {\n        console.warn('Background music playback failed:', error);\n      });\n    }\n  };\n\n  const handleVoicyEnded = () => {\n    // After Voicy clip ends, start Hedwig's Theme\n    setTimeout(() => {\n      playHedwigsTheme();\n    }, 500); // Small delay for smooth transition\n  };\n\n  return (\n    <>\n      {/* Voicy Audio Element */}\n      <audio\n        ref={voicyAudioRef}\n        onEnded={handleVoicyEnded}\n        preload=\"metadata\"\n      />\n      \n      {/* Background Music Audio Element */}\n      <audio\n        ref={musicAudioRef}\n        preload=\"metadata\"\n      />\n    </>\n  );\n};\n\nexport default AudioManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}